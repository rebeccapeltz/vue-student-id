(function(e){function t(t){for(var o,l,s=t[0],i=t[1],c=t[2],d=0,m=[];d<s.length;d++)l=s[d],Object.prototype.hasOwnProperty.call(a,l)&&a[l]&&m.push(a[l][0]),a[l]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);u&&u(t);while(m.length)m.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,s=1;s<n.length;s++){var i=n[s];0!==a[i]&&(o=!1)}o&&(r.splice(t--,1),e=l(l.s=n[0]))}return e}var o={},a={app:0},r=[];function l(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=o,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)l.d(n,o,function(t){return e[t]}.bind(null,o));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=i;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var o=n("85ec"),a=n.n(o);a.a},4488:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("a026"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Banner",{attrs:{cloudname:e.cloudName}}),n("h1",[n("span",[e._v(e._s(e.courseTitle))]),e._v(" "),n("span",[e._v(e._s(e.courseDate))])]),n("h2",[e._v("Create a Badge")]),n("Form",{attrs:{cloudname:e.cloudName,preset:e.preset}}),n("div",{staticClass:"child-page-listing"},[n("h2",[e._v("Badge Gallery")]),n("Gallery")],1)],1)},r=[],l=(n("d3b7"),n("ac1f"),n("3ca3"),n("841c"),n("ddb0"),n("2b3d"),n("5530")),s=n("2f62"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form"},[n("form",{staticClass:"form-inline"},[n("label",{attrs:{for:"fname"}},[e._v("First name:")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.fname,expression:"fname"}],attrs:{type:"text",id:"fname",name:"fname",value:"",size:"12",maxlength:"11",placeholder:"First name"},domProps:{value:e.fname},on:{input:function(t){t.target.composing||(e.fname=t.target.value)}}}),n("br"),n("label",{attrs:{for:"lname"}},[e._v("Last name:")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.lname,expression:"lname"}],attrs:{type:"text",id:"lname",name:"lname",value:"",size:"12",maxlength:"11",placeholder:"Last name"},domProps:{value:e.lname},on:{input:function(t){t.target.composing||(e.lname=t.target.value)}}}),n("br"),n("label",{attrs:{for:"title"}},[e._v("Title:")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],attrs:{type:"text",id:"title",name:"title",value:"",size:"12",maxlength:"22",placeholder:"Title"},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}}),n("br"),n("label",{attrs:{for:"org"}},[e._v("Organization:")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.org,expression:"org"}],attrs:{type:"text",id:"org",name:"org",value:"",size:"12",maxlength:"22",placeholder:"Organization"},domProps:{value:e.org},on:{input:function(t){t.target.composing||(e.org=t.target.value)}}}),n("br"),n("br"),n("label",{attrs:{for:"bgcolor"}},[e._v("Background color:")]),n("br"),n("div",{staticClass:"color-container"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.bgcolor,expression:"bgcolor"}],attrs:{type:"radio",name:"bgcolor",id:"y1",value:"F2D865"},domProps:{checked:e._q(e.bgcolor,"F2D865")},on:{change:function(t){e.bgcolor="F2D865"}}}),e._m(0),n("input",{directives:[{name:"model",rawName:"v-model",value:e.bgcolor,expression:"bgcolor"}],attrs:{type:"radio",name:"bgcolor",id:"y2",value:"F4B21B"},domProps:{checked:e._q(e.bgcolor,"F4B21B")},on:{change:function(t){e.bgcolor="F4B21B"}}}),e._m(1),n("input",{directives:[{name:"model",rawName:"v-model",value:e.bgcolor,expression:"bgcolor"}],attrs:{type:"radio",name:"bgcolor",id:"y3",value:"DB8226"},domProps:{checked:e._q(e.bgcolor,"DB8226")},on:{change:function(t){e.bgcolor="DB8226"}}}),e._m(2),n("input",{directives:[{name:"model",rawName:"v-model",value:e.bgcolor,expression:"bgcolor"}],attrs:{type:"radio",name:"bgcolor",id:"b1",value:"0071BA"},domProps:{checked:e._q(e.bgcolor,"0071BA")},on:{change:function(t){e.bgcolor="0071BA"}}}),e._m(3),n("input",{directives:[{name:"model",rawName:"v-model",value:e.bgcolor,expression:"bgcolor"}],attrs:{type:"radio",name:"bgcolor",id:"b2",value:"0E2F5A"},domProps:{checked:e._q(e.bgcolor,"0E2F5A")},on:{change:function(t){e.bgcolor="0E2F5A"}}}),e._m(4),n("input",{directives:[{name:"model",rawName:"v-model",value:e.bgcolor,expression:"bgcolor"}],attrs:{type:"radio",name:"bgcolor",id:"b3",value:"231F20"},domProps:{checked:e._q(e.bgcolor,"231F20")},on:{change:function(t){e.bgcolor="231F20"}}}),e._m(5)]),n("button",{attrs:{id:"upload",disabled:e.inputRequired,type:"button"},on:{click:e.uploadStudent}},[e._v(" Upload Image ")])])])},c=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"color",attrs:{for:"y1"}},[n("span",{staticClass:"y1"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"color",attrs:{for:"y2"}},[n("span",{staticClass:"y2"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"color",attrs:{for:"y3"}},[n("span",{staticClass:"y3"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"color",attrs:{for:"b1"}},[n("span",{staticClass:"b1"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"color",attrs:{for:"b2"}},[n("span",{staticClass:"b2"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"color",attrs:{for:"b3"}},[n("span",{staticClass:"b3"})])}],u=(n("99af"),n("4de4"),n("a15b"),n("1276"),n("b85c")),d=(n("cb29"),n("13d5"),n("194e")),m=n.n(d),f=function(e){return m.a.Cloudinary.new({cloud_name:e})};function p(e){if(!e)return"";var t,n=e.split(""),o=[],a=Object(u["a"])(n);try{for(a.s();!(t=a.n()).done;){var r=t.value;o.push(encodeURIComponent(encodeURIComponent(r)))}}catch(s){a.e(s)}finally{a.f()}var l=o.join("");return l}var g=function(e){return e.toLowerCase().split("").reduce((function(e,t){return 16*e+"0123456789abcdefgh".indexOf(t)}),0)},h=function(e){var t=g(e.substr(0,2)),n=g(e.substr(2,2)),o=g(e.substr(4,2)),a=.2126*t+.7152*n+.0722*o;return a>=128?"000000":"ffffff"},v=function(e,t){var n={};n.publicId=e.public_id||"",n.fname=e.context.custom.fname,n.lname=e.context.custom.lname,n.fullname="".concat(p(e.context.custom.fname||""),"%20").concat(p(e.context.custom.lname||"")),n.org=p(e.context.custom.org||""),n.title=p(e.context.custom.title||"");var o=e.context.custom.bgcolor.length>0?e.context.custom.bgcolor:"231F20";n.bgcolor="!rgb:".concat(o,"!"),n.color="!rgb:".concat(h(o),"!");var a=Array(45).fill("%20").join(""),r="!".concat(n.fullname,"%250A").concat(n.title,"%250A").concat(n.org,"%250A").concat(a,"!"),l=f(t);return n.URL=l.url(n.publicId,l.transformation().variables([["$data","".concat(r)],["$color","".concat(n.color)],["$bgcolor","".concat(n.bgcolor)]]).transformation("v-badge-color")),n},b={processSingleStudent:v,getContrastL:h},y=b,_={name:"Form",props:["cloudname","preset"],data:function(){return{fname:"",lname:"",title:"",org:"",bgcolor:"",uploadWidget:null,vToastify:this.$vToastify}},methods:Object(l["a"])(Object(l["a"])({},Object(s["d"])(["insertStudent"])),{},{clearForm:function(){this.fname="",this.lname="",this.org="",this.bgcolor=""},deleteNoFaceImage:function(e,t){var n=this;console.log("deleteNoFaceImage");var o={token:e.info.delete_token};fetch("https://api.cloudinary.com/v1_1/".concat(t,"/delete_by_token"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(e){console.log("success deleting image without face",JSON.stringify(e,null,2)),n.vToastify.error("Image uploaded must have a face")})).catch((function(e){console.log("error deleting face",e)}))},createContextMap:function(){return{fname:this.fname||"",lname:this.lname||"",bgcolor:this.bgcolor||"",color:y.getContrastL(this.bgcolor),title:this.title||"",org:this.org||"",uploadDate:(new Date).toISOString()}},uploadStudent:function(){if(!this.isUnique({fname:this.fname,lname:this.lname,org:this.org,title:this.title}))return console.log("new student nust be unique"),void this.vToastify.error("Duplicate data. The data entered must be unique.");this.uploadWidget=window.cloudinary.createUploadWidget({cloudName:this.cloudname,upload_preset:this.preset,sources:["local","url","camera","facebook"],context:this.createContextMap(),clientAllowedFormats:["png","jpeg"],return_delete_token:1},function(e,t){e?console.log(e):(console.log(t),"success"===t.event&&(console.log("success:",JSON.stringify(t,null,2)),t.info&&t.info.faces&&t.info.faces.length>0?(this.vToastify.success("Successful upload!"),this.clearForm(),this.insertStudent(y.processSingleStudent(t.info,this.cloudname)),console.log("new student added:",JSON.stringify(this.allStudents))):(console.log("Successful upload but no face!"),this.deleteNoFaceImage(t,this.cloudname)),"done"===t.event&&console.log("done event:",t.info)))}.bind(this)),this.uploadWidget.open()},isUnique:function(e){console.log("allStudent",this.allStudents);var t=this.allStudents.filter((function(t){return t.fname===e.fname&&t.lname===e.lname&&t.title===e.title&&t.org===e.org}));return 0===t.length},doubleEncode:function(e){if(!e)return"";var t,n=e.split(""),o=[],a=Object(u["a"])(n);try{for(a.s();!(t=a.n()).done;){var r=t.value;o.push(encodeURIComponent(encodeURIComponent(r)))}}catch(s){a.e(s)}finally{a.f()}var l=o.join("");return l},fullname:function(e,t){return"".concat(this.doubleEncode(e||""),"%20").concat(this.doubleEncode(t||""))}}),computed:Object(l["a"])(Object(l["a"])({},Object(s["c"])(["allStudents"])),{},{inputRequired:function(){return!(this.fname.length>0&&this.lname.length>0&&this.org.length>0&&this.title.length>0&&this.bgcolor.length>0)}})},w=_,x=(n("661b"),n("2877")),S=Object(x["a"])(w,i,c,!1,null,"aeb329cc",null),O=S.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"banner"},[e.show?n("div",{staticClass:"top full"},[n("p",[e._v(" This web page is to be used for instructional purposes. The data entered is stored as meta data with your image on the course's Cloudinary account. We ask that you don't share the link to this site publicly. You can remove your data from this page by supplying the first name and last name associated with your picture. This will open your email app and it will be forwarded to training for deletion. ")]),n("p",[e._v(" To delete your image and data from this page, provide first name and last name used to create Student id: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.firstName,expression:"firstName"}],attrs:{type:"text",placeholder:"First Name"},domProps:{value:e.firstName},on:{input:function(t){t.target.composing||(e.firstName=t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.lastName,expression:"lastName"}],attrs:{type:"text",id:"delete-lname",placeholder:"Last name"},domProps:{value:e.lastName},on:{input:function(t){t.target.composing||(e.lastName=t.target.value)}}}),n("a",{staticClass:"email-body",attrs:{href:""},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.deleteEmail()}}},[e._v("Delete")])]),n("a",{staticClass:"close-msg",attrs:{href:"#"},on:{click:function(t){e.show=!1}}},[e._v("OK")])]):e._e()])},j=[],C={name:"Banner",props:["cloudname"],data:function(){return{show:!0,firstName:"",lastName:""}},methods:{deleteEmail:function(){var e=this.firstName||"first name not provided",t=this.lastName||"last name not provided",n="mailto:support@cloudinary.com?subject=Remove me from Student ID Website&body=Delete ".concat(e," ").concat(t," from Student ID application for cloud ").concat(this.cloudname);window.open(n)}}},F=C,k=(n("6ed9"),Object(x["a"])(F,N,j,!1,null,"a225b32a",null)),B=k.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"grid-container",attrs:{id:"gallery"}},e._l(e.allStudents,(function(t){return n("article",{key:t.public_id,staticClass:"student-listing"},[n("Badge",{attrs:{height:e.height,width:e.width,url:t.URL,alt:t.fullname}})],1)})),0)},T=[],E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"badge"},[n("a",{attrs:{href:"#"}},[n("img",{attrs:{width:e.width,height:e.height,src:e.url,alt:e.alt}})])])},D=[],L={name:"Badge",props:["width","height","url","alt"]},$=L,I=Object(x["a"])($,E,D,!1,null,null,null),A=I.exports,q={name:"Gallery",components:{Badge:A},data:function(){return{width:300,height:400}},computed:Object(l["a"])({},Object(s["c"])(["allStudents"]))},U=q,R=(n("7694"),Object(x["a"])(U,P,T,!1,null,"79799876",null)),J=R.exports,z={name:"App",components:{Banner:B,Form:O,Gallery:J},data:function(){return{cloudName:"",courseTitle:"",courseDate:"",preset:"student-id",dupsAllowed:!1,namedTransform:"v-badge-color"}},created:function(){var e=new URLSearchParams(window.location.search);this.cloudName=e.get("cn")||"pictures77",this.courseTitle=e.get("title")||"Test",this.courseDate=e.get("date")||"2020",this.fetchStudents(this.cloudName).then((function(e){console.log(JSON.stringify(e,null,2))})).catch((function(e){console.error(JSON.stringify(e,null,2))}))},methods:Object(l["a"])({},Object(s["b"])(["fetchStudents"]))},M=z,W=(n("034f"),Object(x["a"])(M,a,r,!1,null,null,null)),G=W.exports,K=n("2909");o["a"].use(s["a"]);var Y=new s["a"].Store({state:{studentList:[]},mutations:{insertStudent:function(e,t){var n=e.studentList;n.unshift(t)},addStudent:function(e,t){var n=e.studentList;n.push(t)},setStudentList:function(e,t){var n=e.studentList;n.push.apply(n,Object(K["a"])(t))}},actions:{fetchStudents:function(e,t){var n="https://res.cloudinary.com/".concat(t,"/image/list/v").concat(Date.now(),"/student-id.json");fetch(n).then((function(e){return e.json()})).then((function(n){var o,a=Object(u["a"])(n.resources);try{for(a.s();!(o=a.n()).done;){var r=o.value,l=y.processSingleStudent(r,t);e.commit("addStudent",l)}}catch(s){a.e(s)}finally{a.f()}return e.state.studentList})).catch((function(e){return console.log("error fetching list",e),[]}))}},getters:{allStudents:function(e){return e.studentList}}}),H=n("6838"),Q=n.n(H);o["a"].use(Q.a,{theme:"light",position:"top-left",duration:1e3}),o["a"].config.productionTip=!1,new o["a"]({store:Y,render:function(e){return e(G)}}).$mount("#app")},"661b":function(e,t,n){"use strict";var o=n("4488"),a=n.n(o);a.a},"6ed9":function(e,t,n){"use strict";var o=n("eb43"),a=n.n(o);a.a},7694:function(e,t,n){"use strict";var o=n("f228"),a=n.n(o);a.a},"85ec":function(e,t,n){},eb43:function(e,t,n){},f228:function(e,t,n){}});
//# sourceMappingURL=app.26009735.js.map